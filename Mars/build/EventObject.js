"use strict";var _createClass=(function(){function defineProperties(target,props){for(var i=0;i < props.length;i++) {var descriptor=props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if("value" in descriptor)descriptor.writable = true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var EventObject=(function(){var _proto={onJSON:function onJSON(json){if(!_.isObject(json)){return this;}for(var evt in json) {if(json.hasOwnProperty(evt)){_proto.onEvtCallback.call(this,evt,json[evt]);}}return this;},onEvtCallback:function onEvtCallback(evt,callbacks){if(!_.isString(evt) || _.isUndefined(callbacks)){return this;}if(!_.isArray(callbacks)){callbacks = [callbacks];}callbacks = callbacks.filter(function(val){return _.isFunction(val);}).map(callbackify);if(!callbacks.length){return this;}if(!_.isArray(this._listeners[evt])){this._listeners[evt] = [];}this._listeners[evt] = this._listeners[evt].concat(callbacks);return this;},offJSON:function offJSON(json){if(!_.isObject(json)){return this;}for(var evt in json) {if(json.hasOwnProperty(evt)){_proto.offEvtCallback.call(this,evt,json[evt]);}}return this;},offEvtCallback:function offEvtCallback(evt){var callbacks=arguments.length <= 1 || arguments[1] === undefined?[]:arguments[1];if(this._listeners[evt] === undefined){return this;}if(!_.isArray(callbacks)){callbacks = [callbacks];}callbacks = callbacks.filter(function(val){return _.isFunction(val) && val[CALLBACK_UID_KEY];}).map(function(val){return val[CALLBACK_UID_KEY];});if(!callbacks.length){return this;}var filtered=this._listeners[evt].filter(function(val){return callbacks.indexOf(val[CALLBACK_UID_KEY]) === -1;});if(!filtered.length){delete this._listeners[evt];}else {this._listeners[evt] = filtered;}return this;},fireJSON:function fireJSON(json){for(var eventName in json) {if(json.hasOwnProperty(eventName)){_proto.fireEvent.call(this,eventName,json[eventName]);}}return this;},fireEvent:function fireEvent(eventNames,data){if(!_.isArray(eventNames)){eventNames = [eventNames];}eventNames = eventNames.filter(function(val){return _.isString(val);});if(!eventNames.length){return this;}var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=eventNames[Symbol.iterator](),_step;!(_iteratorNormalCompletion = (_step = _iterator.next()).done);_iteratorNormalCompletion = true) {var evtName=_step.value;if(this._listeners.hasOwnProperty(evtName)){var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=this._listeners[evtName][Symbol.iterator](),_step2;!(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done);_iteratorNormalCompletion2 = true) {var listener=_step2.value;listener(data);}}catch(err) {_didIteratorError2 = true;_iteratorError2 = err;}finally {try{if(!_iteratorNormalCompletion2 && _iterator2.return){_iterator2.return();}}finally {if(_didIteratorError2){throw _iteratorError2;}}}}}}catch(err) {_didIteratorError = true;_iteratorError = err;}finally {try{if(!_iteratorNormalCompletion && _iterator.return){_iterator.return();}}finally {if(_didIteratorError){throw _iteratorError;}}}return this;}};var EventObject=(function(){function EventObject(){var cfg=arguments.length <= 0 || arguments[0] === undefined?{}:arguments[0];_classCallCheck(this,EventObject);var _cfg$listen=cfg.listen;var listen=_cfg$listen === undefined?{}:_cfg$listen;this._listeners = [];this.on(listen);}_createClass(EventObject,[{key:"on",value:function on(){if(arguments.length === 1){return _proto.onJSON.apply(this,arguments);}if(arguments.length >= 2){return _proto.onEvtCallback.apply(this,arguments);}return this;}},{key:"off",value:function off(){if(arguments.length === 1){return _proto.offJSON.apply(this,arguments);}if(arguments.length >= 2){return _proto.offEvtCallback.apply(this,arguments);}return this;}},{key:"fire",value:function fire(){if(arguments.length === 1 && _.isObject(arguments[0])){_proto.fireJSON.apply(this,arguments);}else if(arguments.length >= 1){_proto.fireEvent.apply(this,arguments);}return this;}}]);return EventObject;})();module.exports = EventObject;return EventObject;})();